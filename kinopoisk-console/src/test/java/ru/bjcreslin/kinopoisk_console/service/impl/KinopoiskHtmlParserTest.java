package ru.bjcreslin.kinopoisk_console.service.impl;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Element;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import ru.bjcreslin.kinopoisk_console.exceptions.HtmlParsingFailed;

import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.junit.jupiter.api.Assertions.assertTrue;

class KinopoiskHtmlParserTest {

    private final KinopoiskHtmlParser kinoParser = new KinopoiskHtmlParser();

    private final String htmlRu = "<div class=\"desktop-rating-selection-film-item\" data-tid=\"af76fbb3\"><div class=\"desktop-rating-selection-film-item__rating-position-wrapper\"><div class=\"film-item-rating-position\" data-tid=\"6a4a86b0\"><span class=\"film-item-rating-position__position\">12</span><span class=\"film-item-rating-position__diff film-item-rating-position__diff_sign_neutral\">0</span></div></div><a class=\"selection-film-item-poster selection-film-item-poster_play-button\" data-tid=\"9b39d766\"><img class=\"selection-film-item-poster__image image-partial-component _12xtW0ru9JBdp6H6D23foa CIAcnTIOMz_cEIhVn6aUO\" alt=\"Иван Васильевич меняет профессию\" src=\"//avatars.mds.yandex.net/get-kinopoisk-image/1704946/1a170eea-da02-40c1-a750-91c59d56e1a6/68x102\" srcset=\"//avatars.mds.yandex.net/get-kinopoisk-image/1704946/1a170eea-da02-40c1-a750-91c59d56e1a6/68x102 1x, //avatars.mds.yandex.net/get-kinopoisk-image/1704946/1a170eea-da02-40c1-a750-91c59d56e1a6/136x204 2x\" data-tid=\"d813cf42\"><span class=\"selection-film-item-poster__rating selection-film-item-poster__rating_positive\">8.8</span></a><div class=\"desktop-rating-selection-film-item__content-wrapper\"><div class=\"desktop-rating-selection-film-item__upper-wrapper\"><div class=\"desktop-rating-selection-film-item__meta-wrapper\"><div class=\"selection-film-item-meta selection-film-item-meta_theme_desktop\" data-tid=\"6cf86878\"><a href=\"/film/42664/\" class=\"selection-film-item-meta__link\"><p class=\"selection-film-item-meta__name\">Иван Васильевич меняет профессию</p><p class=\"selection-film-item-meta__original-name\">1973</p><p class=\"selection-film-item-meta__meta-additional\"><span class=\"selection-film-item-meta__meta-additional-item\">СССР</span><span class=\"selection-film-item-meta__meta-additional-item\">комедия, фантастика</span></p></a></div></div><div class=\"desktop-rating-selection-film-item__user-wrapper\"><div class=\"film-item-user-data\" data-tid=\"163b93b5\"><span class=\"rating film-item-user-data__rating\" data-tid=\"facad451\"><span class=\"rating__value rating__value_positive\" data-tid=\"59e7b831\">8.7</span><span class=\"rating__count\" data-tid=\"59e7b831\">741 224</span></span><div class=\"film-item-user-data__controls\" data-tid=\"7a8e3340\"><div class=\"watching-buttons film-item-user-data__watching\" data-tid=\"73f52974\"><div class=\"ui-button-group watching-buttons__group\" data-tid=\"218f4a8d\"><button class=\"ui-button ui-button_size_xs ui-button_kind_ghost watching-buttons__will-watch\" kind=\"ghost\" target=\"_self\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\"><path fill=\"rgba(0, 0, 0, 0.6)\" fill-rule=\"evenodd\" d=\"M9.8 3.2H4.2v7.858l2.8-1.4 2.8 1.4V3.2zM3 2h8v11l-4-2-4 2V2z\"></path></svg><span class=\"watching-buttons__will-watch-caption\" data-tid=\"4c94c8b1\">Буду смотреть</span></button><button class=\"ui-button ui-button_size_xs ui-button_kind_ghost watching-buttons__has-watched\" kind=\"ghost\" target=\"_self\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\"><path fill=\"rgba(0, 0, 0, 0.6)\" fill-rule=\"evenodd\" d=\"M8.8 3.999A5.332 5.332 0 0 0 7 3.7c-.637 0-1.237.098-1.8.299V5.5a1.8 1.8 0 1 0 3.6 0V3.999zm1.2.618V5.5a3 3 0 1 1-6 0v-.883C3.215 5.16 2.511 5.95 1.879 7 3.23 9.244 4.91 10.3 7 10.3c2.089 0 3.77-1.056 5.121-3.3C11.49 5.95 10.785 5.16 10 4.617zM7 11.5C4.267 11.5 2.1 10 .5 7 2.1 4 4.267 2.5 7 2.5S11.9 4 13.5 7c-1.6 3-3.767 4.5-6.5 4.5z\"></path></svg></button></div></div><div class=\"voting orP4zfEYohU5yUqh3kRtK film-item-user-data__voting\" data-tid=\"1eee1326\"><button type=\"button\" class=\"voting__closed _1DGZl_MljxzkNSjxYYB3YB V5CIPvMrirnxs1Bm05smr\" data-tid=\"73e27f8a\"><i class=\"voting__star _2ALhTFBPdh_IVbB-VWHXHn _2r5gNlv9oQw_0Z0_Kc2GyR\"></i></button></div></div><div class=\"film-item-context-menu film-item-user-data__context-menu\" data-tid=\"ea119547\"><div class=\"film-item-context-menu__button\" data-tid=\"a15168b1\"></div></div></div></div></div><div class=\"desktop-rating-selection-film-item__bottom-wrapper\"><div class=\"film-item-buy-buttons\" data-tid=\"50aada8e\"><div class=\"film-item-buy-buttons__online-link-wrapper\"><div class=\"online-block\" data-tid=\"cac4991f\"><a class=\"HaRNLxUnsJBznTziWnJLc _2uafN1nqLS4lOOw1XcCR1F _2Rr4W29sDB8Q8CY5WPzzN3 _3J1Gj9qhiOSA9zzTzU0k5W\" href=\"/film/42664/watch/?from_block=kp-button-list\"><span class=\"_2Or2tSu-DA2pPjcAuVmgCh Whjy4mRGeDV50CJOANc1y\" data-tid=\"63c3b8c4\"></span>По подписке Плюс</a></div></div></div></div></div></div>";
    private final String htmlEng = "<div class=\"desktop-rating-selection-film-item\" data-tid=\"af76fbb3\"><div class=\"desktop-rating-selection-film-item__rating-position-wrapper\"><div class=\"film-item-rating-position\" data-tid=\"6a4a86b0\"><span class=\"film-item-rating-position__position\">1</span><span class=\"film-item-rating-position__diff film-item-rating-position__diff_sign_neutral\">0</span></div></div><a class=\"selection-film-item-poster selection-film-item-poster_play-button\" data-tid=\"9b39d766\"><img class=\"selection-film-item-poster__image imageuronyrnypcfois9ezxf _12xtW0ru9JBdp6H6D23foa CIAcnTIOMz_cEIhVn6aUO\" alt=\"Зеленая миля\" src=\"//kinopoisk-ru.clstorage.net/29tsj5368/c51a53Z61b-/tLdToGKWRes9EotbBzH4BxcGVkE1Gw7Qjrt_ayNnL9-89mUVJdxvCsvx9DBbbfZJw2Ro1VK_SbDs1Eswni6F7jSmRvem0ZM8apWYm9ClbNVRkIPFcgkaA5vt6TwvbORVsLt9m-zV5IAd4GS1j_uhXBSyvoTFrBg1NQjNIQ76FHj4cFin6ouPbLJFz5uC9PLIiE_VyOfcz9_UPDei7OIp0HK8Mx0qmqMBGW_sZwM3qV4RtbRDjXSY8fADl-HD-xY78DBabiyDyCa_i4GSRTu_xEVAG8ovloXVWDe85O2vJ9A7_HcV5J1tQ9GkK-oJt-YRmv0_y0EyVHPxC1zqjL3bMfU6EGpuzAMvcIKGnkc8-4ICiRNHJxCEmBQ8fiJiIKGQ_HA23KwYIMnT5W1tRvirWlYyfIGL9pj--czdaoC0m7F9-9rlrMGHqn-MgFfOs7vLBEuUSmhWDNfR8rWt4qNvGDY4d9RiXWIJWOjlrIM8IBWZvfAAzfKVtv4Lk6bJcxr3NHcZaODFjGq6wM_SyTEziY5B08UukEyYHjh1beyhLVnxd7MVqlosCxEsKmSPuWKW1HO3BY_31_kyQ1tugHldunS7kiJmAcQvOwUEnUd0-81PidtKIFAMmFvysKwjLi0Wtn56Uu1RI0oYbqJnhnNvEp09fwOC9tV698mXLM_x2PH8upbu5AFHK7eFiZbKOrEIz4wXzq-fTZSYtLYq6SKvk7K49Fsq3-ICWWikIIS_412RvHCBCr0WM76FGC4AtNU_Nnkd6eNJAuJ9SU5WQDs8QMBPGgGuGEwWEHX0qibqIZ76cHLfL1iijhKjIqLAuCjXWDUwBkx22L13x1ZliTFcvj_2VuXlCcsmeIAFmMY4MgmBTJZBqJYNVpc8dKNr5qkQvrC-HiVVrgZaLGEkjDAp35M8dAsB89A2cQQeb0uz1zJ3PtAu50fKr_rNB10FMnUJxsieBOYaBBGWuH1jIektXPCxe9kv3ODBEe_gLcl86pNdNXSFRL6WuD5PWCTB9p_6sfHf7G0HAy_wy8HeRnU7wMVNV0eo0Ace0L1x46ho6FD4dP0abdCqB16vo6QB_aJR2Dr9RIT0VbE6BpCng_2T-D5zU2ElTsTuskGJHQf9fwXCwBRG49CLHhQ9f-Ag7yzbcHi9XGXVIIGa6eynhf1qlxxxtw5MOh68c4qYJUqzGjW_MVKu5IBFYTGDiJjA_fxHDM_dwqsbwpbQ8rmqJuLoF7vxt9vrkGeGmGPlao34rhbSMrnFRXYRvfnMVqhPtFi28T-dpCRHDyw4zcuZD_Z6Aw6Elk7nVMYXmDp5LSHubt86eHMVpdyugZ2kYisN-KsZnbc2TQF02TF2gxQsizNYO79wGK4nD4Yg9QPEVQh5NQLCgVVG7F4F3BHyvGGmqikQvHc2lSAUrkWUreXiBfwh0Zr5P05JP9b9Ps5X5ow-FLP3vtksJ0SE5nMJxphB-bGLSIEawKqeA1vVP7llKWmp07s-P9ct323BHqSrJoWwqZedfbLJgrRdMv-G3aTP_RO9OHnf5KKPD-OxDQQRBXi_RAFFU01q0YUcl7V9bWHib9c0erqWahbuitLhqiMNeiDa0jG-ykOyn7z3TN9tBn4bMHHx02Sqj0ZvegxJ2U54vEQFzVsJ6pTDGRnyfKbpp2xc-rIyXO5W5UDQ6CurT7Crlhl8ccVMdx72NIWTaApzFPN4sRBmrgCHKfkBzhHH9LxKj8yeTOqZTlkYtP2hKigsl3n1PhvuEm-AE69kJ47wa9TYcLfAhvMZdDYPU6WHNVbztTBXoabPxmM9yIXTgfX6QgQEVUlmG4mX0_J47eFr4Z899nJbKtfjQtOvZaSB_G-dkrg8QUX31fA_BhEpCTWU-Xc2FaXjQMNkfURIEwU4fwKOS5NH5NyKlJ249KMtqu_Vezz12-AUZgBZLWzjgX2mnpayeYWDfdzxekwdZ4FzUv0-dtrpZwPHL3FBwxVH9X3IQYndSOSXyp8R_fli5qclnbu9P1otUG3NnCEkZof8aRJcu3kGA7XV_LnDWK3PclYxNn8ZpapBzWL1iMjVzXx9iM9OnMVjn4NUXL3xrCrnqNg8drPSq1WqCtIlKmvPM-mS0fh5Rkf2lX52ylangzxStXwxmy_sxgYpO0tOV8I7-ozITNyHKhuG1Nh4f-hjqO3VtbA7ny1cYsAVqOjkTjIk3B1yPYzHNRD7PkrUqAK-ErGxdtmsJ0kNLz3KzBrCtXsFzUtaCiDczJGZcXDjKqOmVnn2fh-r2SLJku_qL8S9pldbOfRKiXXQ83ODXCgHsly_NHxWICcFiyfyzEDfBft3wUaPVYHiGIsYU7sza2HiJlSx-bhcKJ8lylRj6OBPs2zdUn26zEJ80jDxiRWqivNdv_yz26Eijo0v80tNX0h7uEuFhJlNrxEBHNuweGak5qmR9LY2EWyfqsgeoGglRHrqndExPENDfl3xPsuQ5sB81vB_c9ivZoePr__MBtIPsTJNwcediOIYQ1SVMfSlJOZl1n06vZosGOQBkO7tpIm4bJHRu_wCTHnZcX6H0GDLeho9NXOWoeOPzy-6As_bDPP6Dc5HW8isGEPeHDz14Gxm6Jd0d79d6B7oi9nnrOQPMKaSnTN9y8W5mLz3RVlmhrRctbD7F66mzwVntMTJVkc--suBxxWHLJ6KnBn5PCNj6GebcTr_06TUas3U7ujvhvouUxD5vUwPOZ08eAZcIMR6V_c_O1Igb0yNYDVBz56CPfoNRkOTCmdcx9RYM_2oIq_l27H5NVIrGSvI0acrIoGwIFOWs_yJhL6Y_DGF3mDMstq79bRR7KTGDG7yTQSTDXryRUCPHketGIucHno_7inuadiwsLxZ7tntz9skayLAeWaZkr11yM_-FTPzBBApwn4a9v90UimnSIqu_0oOVox9ugDEy1aF4NxBF5Y9sajjrSCeM_b4XqpXrYGRYSJkB7jo0xO4fIKM9JT6_I#DSD\" srcset=\"//kinopoisk-ru.clstorage.net/29tsj5368/c51a53Z61b-/tLdToGKWRes9EotbBzH4BxcGVkE1Gw7Qjrt_ayNnL9-89mUVJdxvCsvx9DBbbfZJw2Ro1VK_SbDs1Eswni6F7jSmRvem0ZM8apWYm9ClbNVRkIPFcgkaA5vt6TwvbORVsLt9m-zV5IAd4GS1j_uhXBSyvoTFrBg1NQjNIQ76FHj4cFin6ouPbLJFz5uC9PLIiE_VyOfcz9_UPDei7OIp0HK8Mx0qmqMBGW_sZwM3qV4RtbRDjXSY8fADl-HD-xY78DBabiyDyCa_i4GSRTu_xEVAG8ovloXVWDe85O2vJ9A7_HcV5J1tQ9GkK-oJt-YRmv0_y0EyVHPxC1zqjL3bMfU6EGpuzAMvcIKGnkc8-4ICiRNHJxCEmBQ8fiJiIKGQ_HA23KwYIMnT5W1tRvirWlYyfIGL9pj--czdaoC0m7F9-9rlrMGHqn-MgFfOs7vLBEuUSmhWDNfR8rWt4qNvGDY4d9RiXWIJWOjlrIM8IBWZvfAAzfKVtv4Lk6bJcxr3NHcZaODFjGq6wM_SyTEziY5B08UukEyYHjh1beyhLVnxd7MVqlosCxEsKmSPuWKW1HO3BY_31_kyQ1tugHldunS7kiJmAcQvOwUEnUd0-81PidtKIFAMmFvysKwjLi0Wtn56Uu1RI0oYbqJnhnNvEp09fwOC9tV698mXLM_x2PH8upbu5AFHK7eFiZbKOrEIz4wXzq-fTZSYtLYq6SKvk7K49Fsq3-ICWWikIIS_412RvHCBCr0WM76FGC4AtNU_Nnkd6eNJAuJ9SU5WQDs8QMBPGgGuGEwWEHX0qibqIZ76cHLfL1iijhKjIqLAuCjXWDUwBkx22L13x1ZliTFcvj_2VuXlCcsmeIAFmMY4MgmBTJZBqJYNVpc8dKNr5qkQvrC-HiVVrgZaLGEkjDAp35M8dAsB89A2cQQeb0uz1zJ3PtAu50fKr_rNB10FMnUJxsieBOYaBBGWuH1jIektXPCxe9kv3ODBEe_gLcl86pNdNXSFRL6WuD5PWCTB9p_6sfHf7G0HAy_wy8HeRnU7wMVNV0eo0Ace0L1x46ho6FD4dP0abdCqB16vo6QB_aJR2Dr9RIT0VbE6BpCng_2T-D5zU2ElTsTuskGJHQf9fwXCwBRG49CLHhQ9f-Ag7yzbcHi9XGXVIIGa6eynhf1qlxxxtw5MOh68c4qYJUqzGjW_MVKu5IBFYTGDiJjA_fxHDM_dwqsbwpbQ8rmqJuLoF7vxt9vrkGeGmGPlao34rhbSMrnFRXYRvfnMVqhPtFi28T-dpCRHDyw4zcuZD_Z6Aw6Elk7nVMYXmDp5LSHubt86eHMVpdyugZ2kYisN-KsZnbc2TQF02TF2gxQsizNYO79wGK4nD4Yg9QPEVQh5NQLCgVVG7F4F3BHyvGGmqikQvHc2lSAUrkWUreXiBfwh0Zr5P05JP9b9Ps5X5ow-FLP3vtksJ0SE5nMJxphB-bGLSIEawKqeA1vVP7llKWmp07s-P9ct323BHqSrJoWwqZedfbLJgrRdMv-G3aTP_RO9OHnf5KKPD-OxDQQRBXi_RAFFU01q0YUcl7V9bWHib9c0erqWahbuitLhqiMNeiDa0jG-ykOyn7z3TN9tBn4bMHHx02Sqj0ZvegxJ2U54vEQFzVsJ6pTDGRnyfKbpp2xc-rIyXO5W5UDQ6CurT7Crlhl8ccVMdx72NIWTaApzFPN4sRBmrgCHKfkBzhHH9LxKj8yeTOqZTlkYtP2hKigsl3n1PhvuEm-AE69kJ47wa9TYcLfAhvMZdDYPU6WHNVbztTBXoabPxmM9yIXTgfX6QgQEVUlmG4mX0_J47eFr4Z899nJbKtfjQtOvZaSB_G-dkrg8QUX31fA_BhEpCTWU-Xc2FaXjQMNkfURIEwU4fwKOS5NH5NyKlJ249KMtqu_Vezz12-AUZgBZLWzjgX2mnpayeYWDfdzxekwdZ4FzUv0-dtrpZwPHL3FBwxVH9X3IQYndSOSXyp8R_fli5qclnbu9P1otUG3NnCEkZof8aRJcu3kGA7XV_LnDWK3PclYxNn8ZpapBzWL1iMjVzXx9iM9OnMVjn4NUXL3xrCrnqNg8drPSq1WqCtIlKmvPM-mS0fh5Rkf2lX52ylangzxStXwxmy_sxgYpO0tOV8I7-ozITNyHKhuG1Nh4f-hjqO3VtbA7ny1cYsAVqOjkTjIk3B1yPYzHNRD7PkrUqAK-ErGxdtmsJ0kNLz3KzBrCtXsFzUtaCiDczJGZcXDjKqOmVnn2fh-r2SLJku_qL8S9pldbOfRKiXXQ83ODXCgHsly_NHxWICcFiyfyzEDfBft3wUaPVYHiGIsYU7sza2HiJlSx-bhcKJ8lylRj6OBPs2zdUn26zEJ80jDxiRWqivNdv_yz26Eijo0v80tNX0h7uEuFhJlNrxEBHNuweGak5qmR9LY2EWyfqsgeoGglRHrqndExPENDfl3xPsuQ5sB81vB_c9ivZoePr__MBtIPsTJNwcediOIYQ1SVMfSlJOZl1n06vZosGOQBkO7tpIm4bJHRu_wCTHnZcX6H0GDLeho9NXOWoeOPzy-6As_bDPP6Dc5HW8isGEPeHDz14Gxm6Jd0d79d6B7oi9nnrOQPMKaSnTN9y8W5mLz3RVlmhrRctbD7F66mzwVntMTJVkc--suBxxWHLJ6KnBn5PCNj6GebcTr_06TUas3U7ujvhvouUxD5vUwPOZ08eAZcIMR6V_c_O1Igb0yNYDVBz56CPfoNRkOTCmdcx9RYM_2oIq_l27H5NVIrGSvI0acrIoGwIFOWs_yJhL6Y_DGF3mDMstq79bRR7KTGDG7yTQSTDXryRUCPHketGIucHno_7inuadiwsLxZ7tntz9skayLAeWaZkr11yM_-FTPzBBApwn4a9v90UimnSIqu_0oOVox9ugDEy1aF4NxBF5Y9sajjrSCeM_b4XqpXrYGRYSJkB7jo0xO4fIKM9JT6_I#DSD 1x, //kinopoisk-ru.clstorage.net/29tsj5368/c51a53Z61b-/tLdToGKWRes9EotbBzH4BxcGVkE1Gw7Qjrt_ayNnL9-89mUVJdxvCsvx9DBbbfZJw2Ro1VK_SbDs1Eswni6F7jSmRvem0ZM8apWYm9ClbNVRkIPFcgkbwUh_qby1rOPVsHw5nKoWZwHToGSj3rsgnFN1fwJDvU80_4jS9A88VDn3PtHvpUkI4_9KidnEdr1KjQkdBuobyZXXsHiiKu9tGDW-PtIs0ChGUqTrKww37JRRcHgIhPWXtDtN2a7P8VU7tDaR7WyPAKS1R0eXzbFyB4HEEsjo04Pf3TxzKWzuIBY1936WJB4viBBsIOyBPWzbHvswgww50Xi5TNFlxL4T9r4zm6dozU9vvIhOkMGzdUPHg9vAZdsF3pBweOuqYa-QdTDy1-1WqsWabmGqBnIjllU3_8BG8xW0NEQW5ESyGrY-u1pt5w9C6zmHQJYIOvoDjoUZR2iUQ1bftbYgJeEsXv36upblmO-HWuVsIse35x0a-HBMx7URuXxD0aqI-903ePLWrmpDRuD5QgzZjT14i8wPEwDn0oUWkHp84OXvLhy8PfVSJFDoyVisqO0Pu2JfmbW-C8L3FPszj5liQLLXcDWyGiUgxYKovMPJEsKzPUOIztsIaNxFVpA_tiUkIKEc83r8m2MX48YZpeplDLKoUh388MPE-hX5sEoTrgL9X_V-Ohsh7EeCK7hPSZ_JPnMJTU7exOxTihec_PAjouqtnnZ-OhVq0G0HUeTsY0uwZN5S8HHMRnJeOvkDXyEAMhr4sPDYqutAym5xhYVYCbRyhAVBHckjUg0WHnQxYSIlZRB7NvKT7tXqR92vJ-XJ9GMV2Dn4jME0lfR3yh1vS7ufcTH5V-HnRoqntYBME8cycYpMAB5FY1SDV17zeOEraGmY9XIyXy_f50tV56imT7jrFNDy8cjMeRD8_MzeJ0F5Hfq9sZ9nLETEpjwCAREC8XvNTEeaTSYaD14Z8vzo6yJmHLk8M5ro1W4FkqxrJ0b9p9ecPPjIQjxdunKDlWEK81iydXdQaO7OhG-8CAfXgbI8g4VEH4RlVMVdFrT55Gur59m1NPYcK5diT1TjK2TPNSafXrn3QYP8F3l7h9ypibFTvnf40uRjhs2ofUqNn0LztMdAQ5LHZB_F0RZweepoI2AdPrz6XG2fZ8XSJ20rzLEmV5h9vAvJNNkyds5QoQt4HTe6eZDlrEcDKfLJT57HNLREAo2dDuBXDpietLYsIiVt2fJ3c1bqESKC1SXnIgG5I5MZs_8FAj2VPXdEFm-GfRp1OTeeKqaHxGO_wAHdxvu_wkaP1kVsG0GcH_x-7KUiYV869vqSJF9uS9IgIKVAOSOWFvx6iop5l_X7y1ktArmddbR50a-shIzqsw3P0gr8MI1HQ9OGZBBLX9R1tinppSUY9XD116TapksWKSkiiTEnHN77NIOJMdz6N4MUbsi-kDk8MR9uLoTH6HWLxdDHtbAJzsnTyeJWi1lTsXss7SrmmDZ3vN7m122IkqMgbE2xa5SY_LAODvpXcfhCXOSK_VM-Mv7YaOYBDGNwScESTvExBwGAF4BvlsTfFPPx6OVibV4y-Phbp5CkC9lvZW1IOaEd1bP8Ag07UbN2SpbmQzTQNr-3UGRmCQwq_ILAX4a6MQQBhJ-IKxaBmRF9tuku6ihduTYw020U5AATbWzswHtrlpl4sc0CNJQyPIlfqkY43Tl8vhCnZA2D67oBzdhOM70EDw6eTW4WjBRRfPBoKSmnHXK1d98qFKCK064ro0y6K1bbub0LB_4QNb6L1WqLtZt7fHOR4KMFTKrwxQSTjHW8QgeFVoZrmg7Tn7e27WXi5NB68XSTatBlBhFuK6LPtSdSkvN1gIY9FPk6gtwoBzubuXaxl6KnQMOv94WIXkzxccdHDxlAZRjJ0Jz5_GErLiXeMLe-FOoapoNT5KmriLWmm5H3f8VC-57wO8eWJEmz3X9y-Ndt68SAq7yJjdVKs7zFjcDbDmoYgpCXdbls6uUoFHh3P95r1-KIniGl4w2zJ1QdPXbFwXtW-TYEGWGD_dx7vvDerqcJwqHxDUTeijk1xc1OHE_nn4rZXDj5ZCQpaJk98PRS41HnT1lvoe0A--jUnbA1xYE_Fbm0yxBvibGSfzq6kCwtT0VqusOHWAg2ckLJSR4PpdYO3Ny8POpgYCfcMHky2q7X7oeTqCwvj3rpGdN8v4FLv9Y8MYOQ7YYwED8-d9duroTKYbzFBtpFNvzDQEwZiSjcyZaZ_TXlayksl7O1dJ8uUWvHmi9rLUTwZptYOvRIjfGW_DnOWWUGNRxxMPLd4SKEhue0CgBWgPGyz4TH3YajHg3REDf_puNibRexfXtZbdItwJnp5y-Le2hR0jOwBgs6n_76TFMshLhdcDA6EmyjgQ3hvAuHWwC8MgAOBNZKb1MEWxS_9O3up2mYdDg01yCWLU-boySvTnCh15Kw_ICEO51xO4MRqcjy0vt_udJvrcUE4zwHABCN-_iKCECVTqoeDRlc8XVhLSdpVDOxuFyr1qoBUi1qKs-9Y1GesHZAxTSa9bvDXelO-dQ3svPSIaNADKO8Qs7ZhPi6QkhPFYjqUA0Z1nh4YGhv6dlyuPVebBKsDdhkY2uPO-ubnfz-wQy9WrR2Sp9gSLQacTp2WqCsBUxp9EwI3wmzd0KOAJXGpdCL0JR9vamrYGdWfr24HuJeZo-eaWovhLIhE1xxNAGLd9qx9sXcZQ721Hp4-ZrlIszP4fPNjdnBdnRCSMcRQCibSZ3cPHdoICEg1D59e9Rj0avOm2wj7Em1ax1c935ATvxdtDaMX-dO_hz3NDMV5u4HRWD9CoESzPkzSgDB3c1lUQ3RlHo-qmYqYVg9fDJdaBRrCJxmoKxJ9KJblvNwyQ-3HTn5Tt4pB_DQN3k51eUrBMvmPQeGGAl4NAJFRZmFpxzJGx_yeSQg4CIRe_90GW9Q5UjSLOXlDzNj1dxydcBF9Be4ME 2x\" data-tid=\"d813cf42\"><span class=\"selection-film-item-poster__rating selection-film-item-poster__rating_positive\">9.1</span></a><div class=\"desktop-rating-selection-film-item__content-wrapper\"><div class=\"desktop-rating-selection-film-item__upper-wrapper\"><div class=\"desktop-rating-selection-film-item__meta-wrapper\"><div class=\"selection-film-item-meta selection-film-item-meta_theme_desktop\" data-tid=\"6cf86878\"><a href=\"/film/435/\" class=\"selection-film-item-meta__link\"><p class=\"selection-film-item-meta__name\">Зеленая миля</p><p class=\"selection-film-item-meta__original-name\">Green Mile, The, 1999</p><p class=\"selection-film-item-meta__meta-additional\"><span class=\"selection-film-item-meta__meta-additional-item\">США</span><span class=\"selection-film-item-meta__meta-additional-item\">драма, криминал</span></p></a></div></div><div class=\"desktop-rating-selection-film-item__user-wrapper\"><div class=\"film-item-user-data\" data-tid=\"163b93b5\"><span class=\"rating film-item-user-data__rating\" data-tid=\"facad451\"><span class=\"rating__value rating__value_positive\" data-tid=\"59e7b831\">9.0</span><span class=\"rating__count\" data-tid=\"59e7b831\">733 328</span></span><div class=\"film-item-user-data__controls\" data-tid=\"7a8e3340\"><div class=\"watching-buttons film-item-user-data__watching\" data-tid=\"73f52974\"><div class=\"ui-button-group watching-buttons__group\" data-tid=\"218f4a8d\"><button class=\"ui-button ui-button_size_xs ui-button_kind_ghost watching-buttons__will-watch\" kind=\"ghost\" target=\"_self\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\"><path fill=\"rgba(0, 0, 0, 0.6)\" fill-rule=\"evenodd\" d=\"M9.8 3.2H4.2v7.858l2.8-1.4 2.8 1.4V3.2zM3 2h8v11l-4-2-4 2V2z\"></path></svg><span class=\"watching-buttons__will-watch-caption\" data-tid=\"4c94c8b1\">Буду смотреть</span></button><button class=\"ui-button ui-button_size_xs ui-button_kind_ghost watching-buttons__has-watched\" kind=\"ghost\" target=\"_self\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\"><path fill=\"rgba(0, 0, 0, 0.6)\" fill-rule=\"evenodd\" d=\"M8.8 3.999A5.332 5.332 0 0 0 7 3.7c-.637 0-1.237.098-1.8.299V5.5a1.8 1.8 0 1 0 3.6 0V3.999zm1.2.618V5.5a3 3 0 1 1-6 0v-.883C3.215 5.16 2.511 5.95 1.879 7 3.23 9.244 4.91 10.3 7 10.3c2.089 0 3.77-1.056 5.121-3.3C11.49 5.95 10.785 5.16 10 4.617zM7 11.5C4.267 11.5 2.1 10 .5 7 2.1 4 4.267 2.5 7 2.5S11.9 4 13.5 7c-1.6 3-3.767 4.5-6.5 4.5z\"></path></svg></button></div></div><div class=\"voting orP4zfEYohU5yUqh3kRtK film-item-user-data__voting\" data-tid=\"1eee1326\"><button type=\"button\" class=\"voting__closed _1DGZl_MljxzkNSjxYYB3YB V5CIPvMrirnxs1Bm05smr\" data-tid=\"73e27f8a\"><i class=\"voting__star _2ALhTFBPdh_IVbB-VWHXHn _2r5gNlv9oQw_0Z0_Kc2GyR\"></i></button></div></div><div class=\"film-item-context-menu film-item-user-data__context-menu\" data-tid=\"ea119547\"><div class=\"film-item-context-menu__button\" data-tid=\"a15168b1\"></div></div></div></div></div><div class=\"desktop-rating-selection-film-item__bottom-wrapper\"><div class=\"film-item-buy-buttons\" data-tid=\"50aada8e\"><div class=\"film-item-buy-buttons__online-link-wrapper\"><div class=\"online-block\" data-tid=\"cac4991f\"><a class=\"HaRNLxUnsJBznTziWnJLc _2uafN1nqLS4lOOw1XcCR1F _2Rr4W29sDB8Q8CY5WPzzN3 _3J1Gj9qhiOSA9zzTzU0k5W\" href=\"/film/435/watch/?from_block=kp-button-list\"><span class=\"_2Or2tSu-DA2pPjcAuVmgCh Whjy4mRGeDV50CJOANc1y\" data-tid=\"63c3b8c4\"></span>По подписке Плюс</a></div></div></div></div></div></div>";

    @Test
    void shouldGetOriginalNameRu() {
        Element element = Jsoup.parseBodyFragment(htmlRu).root();
        Assertions.assertNotNull(kinoParser.getOriginalName(element));
        Assertions.assertEquals("Иван Васильевич меняет профессию", kinoParser.getOriginalName(element));
    }

    @Test
    void shouldGetOriginalNameEng() {
        Element element = Jsoup.parseBodyFragment(htmlEng).root();
        Assertions.assertNotNull(kinoParser.getOriginalName(element));
        Assertions.assertEquals("Green Mile", kinoParser.getOriginalName(element));
    }

    @Test
    void shouldGetYearRu() {
        Element element = Jsoup.parseBodyFragment(htmlRu).root();
        Assertions.assertNotNull(kinoParser.getYear(element));
        Assertions.assertEquals("1973", kinoParser.getYear(element));
    }

    @Test
    void shouldGetYearEng() {
        Element element = Jsoup.parseBodyFragment(htmlEng).root();
        Assertions.assertNotNull(kinoParser.getYear(element));
        Assertions.assertEquals("1999", kinoParser.getYear(element));
    }

    @Test
    void shouldGetNameRu() {
        Element element = Jsoup.parseBodyFragment(htmlRu).root();
        Assertions.assertNotNull(kinoParser.getName(element));
        Assertions.assertEquals("Иван Васильевич меняет профессию", kinoParser.getName(element));
    }

    @Test
    void shouldGetNameEng() {
        Element element = Jsoup.parseBodyFragment(htmlEng).root();
        Assertions.assertNotNull(kinoParser.getName(element));
        Assertions.assertEquals("Зеленая миля", kinoParser.getName(element));
    }

    @Test
    void shouldGetPositionRu() {
        Element element = Jsoup.parseBodyFragment(htmlRu).root();
        Assertions.assertEquals(12, kinoParser.getPosition(element));
    }

    @Test
    void shouldGetPositionEng() {
        Element element = Jsoup.parseBodyFragment(htmlEng).root();
        Assertions.assertEquals(1, kinoParser.getPosition(element));
    }

    @Test
    void shouldGetVotersEng() {
        Element element = Jsoup.parseBodyFragment(htmlEng).root();
        Assertions.assertEquals(733328, kinoParser.getVoters(element));
    }

    @Test
    void shouldGetVotersRu() {
        Element element = Jsoup.parseBodyFragment(htmlRu).root();
        Assertions.assertEquals(741224, kinoParser.getVoters(element));
    }

    @Test
    void shouldGetRatingEng() {
        Element element = Jsoup.parseBodyFragment(htmlEng).root();
        Assertions.assertEquals(9.0, kinoParser.getRatingValue(element), .01);
    }

    @Test
    void shouldGetRatingRu() {
        Element element = Jsoup.parseBodyFragment(htmlRu).root();
        Assertions.assertEquals(8.7, kinoParser.getRatingValue(element), .01);
    }

    @Test
    void sholdException() {
        Exception exception = assertThrows(HtmlParsingFailed.class, () -> {
            kinoParser.getMovie(null);
        });
        assertTrue(exception.getMessage().contains(HtmlParsingFailed.PARSING_ERROR));
    }
}